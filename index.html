<!DOCTYPE html>


<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Cat Clicker</title>
    <!-- Latest compiled and minified CSS
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"> -->

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js">
    </script>

    <!-- Latest compiled JavaScript
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script> -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.2.32.min.js"></script>

    <link rel="stylesheet" href="css/style.css">

    <script src="js/jQuery.js"></script>

</head>

<body>

<div class="text-center">
    <div class="row">
        <ul id="catsList" class="center"></ul>
        <div id="catDetail" class="center">
            <h2 id="catName"></h2>
            <div id="numCount"></div>
            <img id='catImage' src='' alt='cat' >
        </div>
    </div>
</div>

<script type="text/javascript">

    $(function(){

      var model = {
        cats: [
            {name: "Cat Peeking", img: "cat-halfshow.jpg", count: 0},
            {name: "Cat Menacing", img: "cat-staring.jpg", count: 0},
            {name: "Cat in-waiting", img: "cat-liedown.jpg", count: 0},
            {name: "Cat Looking", img: "cat-looking.jpg", count: 0},
            {name: "Cat in new home", img: "cat-newhome.jpg", count: 0},
            {name: "Cat Bouncing", img: "cat-bounce.png", count: 0}
          ],
        init: function(){
          return cats;
        },

        add: function(catObj){
          cats.push(catObj);
        },

        updateCount: function(id, count){
          cats[id].count = count;
        },

        getAllCats: function(){
          return cats;
        }

      };

      var octopus = {
        init: function(){
          model.init();
          view.init();
        },

        addCat: function(catObj){
          model.add(catObj);
        },

        getCats: function(){
          model.getAllCats();
        },

        getCat: function(n){
          var catObj = model.getAllCats()[n];
          view.renderCatDetail(n, catObj);
        },

        countClick: function(id){
          var cat = model.getAllCats()[id];
          var count = cat.count++;
          model.updateCount(id, count) ;
          view.renderUpdatedClickCount(count);
        }

      };

      var view = {
        init: function(){
          view.renderList();
        },

        renderList: function(){
          var list = $('#catList'),
              catsList = "",
              i,
              cats = octopus.getCats();
          //console.log(JSON.stringify(cats));
          for (i=0; i<cats.length; i++){
            console.log(cats[i].name);
            catsList += "<li id='" + i + "' class='list'
                          onClick=octopus.getCat(this.id)>" + cats[i].name + "</li>";
          }
          list.append(catsList);
        },

        renderCatDetail: function(n, catObj){
          var cat = catObj,
              catDetail = $('#catDetail'),
              clickCount = "<button id='" + n + "' type='button' class='button'
                             onClick=octopus.countClick(this.id)>Click Me to Like Me!</button>";

              document.getElementById('catName').innerHTML = cat.name;
              document.getElementById('numCount').innerHTML = cat.count;
              document.getElementById('catImage').src = cat.img;

            catDetail.append(clickCount);
        },

        renderUpdatedClickCount: function(count){
            document.getElementById('msgCount').innerHTML = "Like: " + count;
        }

      };

      octopus.init();

    });


/*
var cats = [
            {name: "Cat Peeking", img: "cat-halfshow.jpg", count: 0},
            {name: "Cat Menacing", img: "cat-staring.jpg", count: 0},
            {name: "Cat in-waiting", img: "cat-liedown.jpg", count: 0},
            {name: "Cat Looking", img: "cat-looking.jpg", count: 0},
            {name: "Cat in new home", img: "cat-newhome.jpg", count: 0},
            {name: "Cat Bouncing", img: "cat-bounce.png", count: 0}
          ];

renderList = function(){
          var list = $('#list'),
              catsList = "",
              i;
              //cats = model.getAllCats();
          //console.log(JSON.stringify(cats));
          for (i=0; i<cats.length; i++){
            //console.log(cats[i].name);
            catsList += "<button id='"+ i +"' type='button' class='button'
                          onClick=octopus.getCat(this.id)>" + cats[i].name + "</button>";
          }
          list.append(catsList);
        };
*/

</script>


</body>

</html>
