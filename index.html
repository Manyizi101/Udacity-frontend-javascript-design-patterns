<!DOCTYPE html>


<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Cat Clicker</title>
    <!-- Latest compiled and minified CSS
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"> -->

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js">
    </script>

    <!-- Latest compiled JavaScript
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script> -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.2.32.min.js"></script>

    <link rel="stylesheet" href="css/style.css">

    <script src="js/jQuery.js"></script>

</head>

<body>

<div class="text-center">
    <div class="row">
        <ul id="catsList" class="center"></ul>
        <div id="catDetail" class="center">
            <h2 id="catName"></h2>
            <div id="numClick"></div>
            <img id='catImage' src='' alt='cat' >
        </div>
    </div>
</div>

<script type="text/javascript">

    $(function(){

      var model = {
        currentCat: null,
        cats: [
            {name: "Cat Peeking", img: "images/cat-halfshow.jpg", numClick: 0},
            {name: "Cat Menacing", img: "images/cat-staring.jpg", numClick: 0},
            {name: "Cat in-waiting", img: "images/cat-liedown.jpg", numClick: 0},
            {name: "Cat Looking", img: "images/cat-looking.jpg", numClick: 0},
            {name: "Cat in new home", img: "images/cat-newhome.jpg", numClick: 0},
            {name: "Cat Bouncing", img: "images/cat-bounce.png", numClick: 0},
            {name: "Cat Help with SAT", img: "images/cat-SATwork.jpg", numClick: 0}
          ]
      };

      var octopus = {
        init: function(){
          //this.setCurrentCat(model.cats[0]);
          model.currentCat = model.cats[0];
          catsListView.init();
          catDetailView.init();
        },

        addCat: function(catObj){
          model.cats.push(catObj);
        },

        getCats: function(){
          return model.cats;
        },

        setCurrentCat: function(catObj){
          model.currentCat = catObj;
        },

        getCurrentCat: function(){
          return model.currentCat;
        },

        countClick: function(){
          model.currentCat.numClick++;
          console.log("model.currentCat.numClick = " + model.currentCat.numClick);

          for (var i=0; i<model.cats.length; i++){
            var cat = model.cats[i];
            if (model.currentCat.name === cat.name){
              cat.numClick = model.currentCat.numClick;
              console.log("model.cats[i].numClick: " + model.cats[i].numClick);
            }
          }

          catDetailView.init();
        }

      };

      var catsListView = {
        init: function(){
          this.catsList = document.getElementById("catsList");
          this.render();
        },

        render: function(){
          var cat, i, elem,
              cats = octopus.getCats();
          //console.log(JSON.stringify(cats));
          this.catsList.innerHTML = "";
          for (i=0; i<cats.length; i++){
              cat = cats[i];
              elem = document.createElement('li');
              elem.textContent = cat.name;
              elem.addEventListener('click', (function(catCopy){
                return function(){
                  octopus.setCurrentCat(catCopy);
                  catDetailView.init();
                };
              })(cat));
              this.catsList.appendChild(elem);
          }
        }

      };

      var catDetailView = {
          init: function(){
            //this.catDetail = document.getElementById("catDetail");
            this.catName = document.getElementById("catName");
            this.catImage = document.getElementById("catImage");
            this.numClick = document.getElementById("numClick");
            this.catImage.addEventListener('click', function(){
              octopus.countClick();
            });
            this.render();
          },

          render: function(){
            var currentCat = octopus.getCurrentCat();
            this.numClick.textContent = "Like: " + currentCat.numClick;
            this.catName.textContent = currentCat.name;
            this.catImage.src = currentCat.img;
          }

      };

      octopus.init();

    });


/*
var cats = [
            {name: "Cat Peeking", img: "cat-halfshow.jpg", count: 0},
            {name: "Cat Menacing", img: "cat-staring.jpg", count: 0},
            {name: "Cat in-waiting", img: "cat-liedown.jpg", count: 0},
            {name: "Cat Looking", img: "cat-looking.jpg", count: 0},
            {name: "Cat in new home", img: "cat-newhome.jpg", count: 0},
            {name: "Cat Bouncing", img: "cat-bounce.png", count: 0}
          ];

renderList = function(){
          var list = $('#list'),
              catsList = "",
              i;
              //cats = model.getAllCats();
          //console.log(JSON.stringify(cats));
          for (i=0; i<cats.length; i++){
            //console.log(cats[i].name);
            catsList += "<button id='"+ i +"' type='button' class='button'
                          onClick=octopus.getCat(this.id)>" + cats[i].name + "</button>";
          }
          list.append(catsList);
        };
*/

</script>


</body>

</html>
